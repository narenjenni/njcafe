<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Order — NJ Cafe</title>
  <meta name="description" content="CoffeeToffee-style: order dengan catatan, keranjang, mailto." />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { brand: {"DEFAULT":"#7f1d1d", "soft":"#fecaca"}, sand: "#fff7ed" },
          fontFamily: { display: ["Inter","ui-sans-serif","system-ui"] },
          boxShadow: { glow: "0 20px 40px rgba(0,0,0,.25)" }
        }
      }
    };
  </script>
  <style>
    .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 font-semibold; }
    .btn-primary { @apply btn bg-brand text-white hover:brightness-110 active:translate-y-0.5; }
    .btn-secondary { @apply btn border border-black/10 text-black hover:bg-black/[.03] active:translate-y-0.5; }
    .btn-dark { @apply btn bg-black text-white hover:brightness-110 active:translate-y-0.5; }
    .chip { @apply px-2 py-1 text-xs rounded-full bg-black/5; }
    .card { @apply rounded-2xl border border-black/10 bg-white; }
    .muted { @apply text-black/60; }
    .hero { background: radial-gradient(65rem 35rem at 10% -10%, rgba(127,29,29,.08), transparent 60%), radial-gradient(50rem 30rem at 90% -10%, rgba(127,29,29,.06), transparent 60%), linear-gradient(180deg,#fafafa,#ffffff); }
    .ph-img { @apply rounded-xl border border-black/10; background-image: linear-gradient(135deg, #f5f5f5, #f0f0f0); }
    body { @apply bg-[#fafafa] text-black; }
  </style>
</head>
<body class="font-display">

<header class="sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-black/10">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
    <a href="index.html" class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl bg-brand text-white grid place-content-center font-extrabold">NJ</div>
      <span class="font-extrabold tracking-tight">NJ Cafe</span>
    </a>
    <nav class="hidden md:flex items-center gap-2 text-sm">
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 " href="index.html">Home</a>
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 bg-black/5" href="order.html">Order</a>
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 " href="outlets.html">Outlets</a>
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 " href="academy.html">Academy</a>
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 " href="news.html">News</a>
      <a class="px-3 py-2 rounded-lg hover:bg-black/5 " href="faq.html">FAQ</a>
      <a class="btn-primary ml-2" href="order.html">Pesan</a>
    </nav>
    <button id="openMenu" class="md:hidden btn-dark">
      <svg viewBox="0 0 24 24" class="w-5 h-5" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      Menu
    </button>
  </div>
</header>

<!-- Drawer Mobile -->
<div id="drawer" class="fixed inset-0 z-50 hidden">
  <div id="backdrop" class="absolute inset-0 bg-black/50 opacity-0 transition-opacity duration-300"></div>
  <aside id="panel" class="absolute right-0 top-0 h-full w-80 bg-white border-l border-black/10 p-5 translate-x-full transition-transform duration-300">
    <div class="flex items-center justify-between mb-2">
      <div class="font-extrabold">Navigasi</div>
      <button id="closeMenu" class="btn-secondary">Tutup</button>
    </div>
    <nav class="grid gap-1 text-base">
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="index.html">Home</a>
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="order.html">Order</a>
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="outlets.html">Outlets</a>
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="academy.html">Academy</a>
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="news.html">News</a>
      <a class="px-3 py-3 rounded-lg hover:bg-black/5" href="faq.html">FAQ</a>
    </nav>
  </aside>
</div>

<main class="max-w-7xl mx-auto px-4 py-10">
  <h1 class="text-3xl font-extrabold">Order Online</h1>
  <p class="muted mt-1">Tulis catatan di setiap item (mis. “tidak pedas ya”).</p>

  <div class="card p-4 mt-4 sticky top-20 z-30 bg-white">
    <div class="grid sm:grid-cols-3 gap-3">
      <input id="q" class="w-full rounded-lg border border-black/10 px-3 py-2" placeholder="Cari menu / kata kunci" />
      <select id="cat" class="rounded-lg border border-black/10 px-3 py-2"></select>
      <select id="sort" class="rounded-lg border border-black/10 px-3 py-2">
        <option value="name">Urutkan: Nama</option>
        <option value="price-asc">Harga: Rendah → Tinggi</option>
        <option value="price-desc">Harga: Tinggi → Rendah</option>
      </select>
    </div>
    <div id="chips" class="mt-3 flex flex-wrap gap-2 text-sm"></div>
  </div>

  <div id="catalog" class="mt-6 grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-5"></div>
</main>

<button id="openCart" class="fixed bottom-24 right-4 md:right-6 btn-dark shadow-glow">Lihat Keranjang</button>

<div id="cartWrap" class="fixed inset-0 z-50 hidden">
  <div id="cartBackdrop" class="absolute inset-0 bg-black/50 opacity-0 transition-opacity duration-300"></div>
  <aside id="cartPanel" class="absolute right-0 top-0 h-full w-[420px] max-w-full bg-white border-l border-black/10 p-5 translate-x-full transition-transform duration-300">
    <div class="flex items-center justify-between">
      <h2 class="font-extrabold text-xl">Keranjang</h2>
      <button id="cartClose" class="btn-secondary">Tutup</button>
    </div>
    <div id="lines" class="mt-3"></div>
    <div class="mt-4 flex items-center justify-between font-extrabold">
      <div>Total</div><div id="total">Rp0</div>
    </div>
    <div class="mt-4 grid gap-2">
      <button id="btnCopy" class="btn-secondary">Salin Rincian</button>
      <a id="mailto" class="btn-primary text-center" href="#">Kirim ke Email</a>
      <a id="wa" class="btn-primary text-center" href="#" target="_blank">Kirim via WhatsApp</a>
      <button id="btnClear" class="btn-secondary">Kosongkan</button>
    </div>
  </aside>
</div>

<div id="modal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 bg-black/60">
  <div class="bg-white rounded-2xl p-5 w-full max-w-md border border-black/10">
    <div class="flex items-center justify-between">
      <div class="font-extrabold" id="mName">Item</div>
      <button id="mClose" class="btn-secondary">Tutup</button>
    </div>
    <div class="mt-3 text-sm flex items-center justify-between">
      <span class="muted">Harga</span><span id="mPrice" class="font-extrabold text-brand">Rp0</span>
    </div>
    <label class="text-sm muted mt-3">Catatan (opsional)</label>
    <textarea id="mNote" class="w-full mt-1 rounded-lg border border-black/10 px-3 py-2" rows="3" placeholder='Contoh: "tidak pedas ya"'></textarea>
    <label class="text-sm muted mt-3">Kuantitas</label>
    <div class="mt-1 flex items-center gap-2">
      <button id="mMinus" class="btn-secondary px-3">−</button>
      <input id="mQty" type="number" min="1" value="1" class="w-20 text-center rounded-lg border border-black/10 px-3 py-2" />
      <button id="mPlus" class="btn-secondary px-3">+</button>
    </div>
    <div class="mt-4 flex justify-end gap-2">
      <button id="mAdd" class="btn-primary">Tambah ke Keranjang</button>
    </div>
  </div>
</div>

<script>
const MENU=[
  {{id:'c1',name:'Espresso',cat:'Coffee',price:18000,tags:['Strong']}},
  {{id:'c2',name:'Americano',cat:'Coffee',price:20000,tags:['Classic']}},
  {{id:'c3',name:'Cappuccino',cat:'Coffee',price:26000,tags:['Foamy']}},
  {{id:'c4',name:'Cafe Latte',cat:'Coffee',price:26000,tags:['Milky']}},
  {{id:'c5',name:'Caramel Macchiato',cat:'Coffee',price:32000,tags:['Sweet']}},
  {{id:'c6',name:'Mocha',cat:'Coffee',price:30000,tags:['Chocolate']}},
  {{id:'t1',name:'Matcha Latte',cat:'Non-Coffee',price:28000,tags:['Green Tea']}},
  {{id:'t2',name:'Chocolate',cat:'Non-Coffee',price:24000,tags:['Cocoa']}},
  {{id:'t3',name:'Thai Tea',cat:'Non-Coffee',price:24000,tags:['Iced']}},
  {{id:'t4',name:'Lemon Tea',cat:'Non-Coffee',price:22000,tags:['Fresh']}},
  {{id:'t5',name:'Lychee Tea',cat:'Non-Coffee',price:24000,tags:['Fruity']}},
  {{id:'f1',name:'Cookies & Cream Frappe',cat:'Frappe',price:32000,tags:['Blended']}},
  {{id:'f2',name:'Caramel Frappe',cat:'Frappe',price:32000,tags:['Sweet']}},
  {{id:'s1',name:'Mango Smoothie',cat:'Smoothie',price:30000,tags:['Fruity']}},
  {{id:'s2',name:'Strawberry Smoothie',cat:'Smoothie',price:30000,tags:['Fruity']}},
  {{id:'b1',name:'Butter Croissant',cat:'Bakery',price:18000,tags:['Flaky']}},
  {{id:'b2',name:'Almond Croissant',cat:'Bakery',price:24000,tags:['Nutty']}},
  {{id:'b3',name:'Cinnamon Roll',cat:'Bakery',price:22000,tags:['Warm']}},
  {{id:'b4',name:'Chocolate Lava Cake',cat:'Bakery',price:28000,tags:['Dessert']}},
  {{id:'r1',name:'Nasi Goreng Jawa',cat:'Rice & Pasta',price:32000,tags:['Savory','Spicy Level']}},
  {{id:'r2',name:'Mie Goreng Spesial',cat:'Rice & Pasta',price:30000,tags:['Wok']}},
  {{id:'r3',name:'Aglio Olio',cat:'Rice & Pasta',price:35000,tags:['Pasta']}},
  {{id:'r4',name:'Chicken Carbonara',cat:'Rice & Pasta',price:38000,tags:['Creamy']}},
  {{id:'sn1',name:'French Fries',cat:'Snacks',price:20000,tags:['Crispy']}},
  {{id:'sn2',name:'Onion Rings',cat:'Snacks',price:20000,tags:['Crispy']}},
  {{id:'sn3',name:'Chicken Wings (6 pcs)',cat:'Snacks',price:38000,tags:['Savory']}},
  {{id:'sn4',name:'Tahu Crispy',cat:'Snacks',price:18000,tags:['Vegan']}},
  {{id:'sn5',name:'Pisang Cokelat',cat:'Snacks',price:20000,tags:['Dessert']}},
  {{id:'sg1',name:'Kopi Susu NJ',cat:'Signature',price:28000,tags:['House Blend']}},
  {{id:'sg2',name:'Es Kopi Aren',cat:'Signature',price:28000,tags:['Palm Sugar']}},
  {{id:'sg3',name:'Es Coklat NJ',cat:'Signature',price:26000,tags:['House']}},
  {{id:'sg4',name:'Teh Tarik NJ',cat:'Signature',price:24000,tags:['Creamy']}}
];
let CART=JSON.parse(localStorage.getItem('nj_cart_v6')||'[]');
const fmt=n=>new Intl.NumberFormat('id-ID',{style:'currency',currency:'IDR',maximumFractionDigits:0}).format(n);
function save(){localStorage.setItem('nj_cart_v6',JSON.stringify(CART));}
function cartTotal(){return CART.reduce((s,l)=>s+l.price*l.qty,0);}

function renderCats(){const cats=['All',...Array.from(new Set(MENU.map(m=>m.cat)))];const sel=document.getElementById('cat');sel.innerHTML=cats.map(c=>`<option>${c}</option>`).join('');const chips=document.getElementById('chips');chips.innerHTML=cats.map(c=>`<button class='chip' data-c='${c}'>${c}</button>`).join('');chips.querySelectorAll('[data-c]').forEach(b=>b.addEventListener('click',e=>{sel.value=e.currentTarget.dataset.c;renderList();}));}
function renderList(){const q=(document.getElementById('q').value||'').toLowerCase();const c=document.getElementById('cat').value;const sort=document.getElementById('sort').value;let arr=MENU.filter(m=>{const matchQ=m.name.toLowerCase().includes(q)||m.tags.some(t=>t.toLowerCase().includes(q));const matchC=(c==='All'||m.cat===c);return matchQ&&matchC;});if(sort==='name')arr.sort((a,b)=>a.name.localeCompare(b.name));if(sort==='price-asc')arr.sort((a,b)=>a.price-b.price);if(sort==='price-desc')arr.sort((a,b)=>b.price-a.price);const list=document.getElementById('catalog');list.innerHTML='';arr.forEach(item=>{const el=document.createElement('div');el.className='card p-4 hover:shadow-glow';el.innerHTML=`
  <div class="ph-img aspect-[4/3] mb-3"></div>
  <div class="flex flex-wrap items-center gap-2 mb-2"><span class="chip">${{item.cat}}</span>${{item.tags.map(t=>`<span class="chip">${{t}}</span>`).join('')}} </div>
  <h3 class="font-extrabold text-lg">${{item.name}}</h3>
  <div class="text-brand font-bold">${{fmt(item.price)}}</div>
  <p class="muted text-sm mt-2">Deskripsi singkat ${{item.name.toLowerCase()}}.</p>
  <div class="mt-3 flex gap-2">
    <button class="btn-primary" data-add="${{item.id}}">Tambah</button>
    <button class="btn-secondary" data-detail="${{item.id}}">Detail</button>
  </div>`;list.appendChild(el);});document.querySelectorAll('[data-add]').forEach(b=>b.addEventListener('click',e=>openModal(e.currentTarget.getAttribute('data-add'))));document.querySelectorAll('[data-detail]').forEach(b=>b.addEventListener('click',e=>openModal(e.currentTarget.getAttribute('data-detail'))));}

function line(l,i){const note=l.note?`<div class="chip mt-1">${{l.note}}</div>`:'';return `<div class="py-3 border-b border-black/10 flex items-start justify-between gap-3"><div><div class="font-bold">${{l.name}}</div>${{note}}<div class="mt-2 inline-flex items-center rounded-lg border border-black/10 overflow-hidden"><button class="px-3 py-1" data-dec="${{i}}">−</button><span class="px-3">${{l.qty}}</span><button class="px-3 py-1" data-inc="${{i}}">+</button></div></div><div class="text-right"><div>${{fmt(l.price*l.qty)}}</div><button class="text-black/60 underline" data-del="${{i}}">Hapus</button></div></div>`;}
function renderCart(){const lines=document.getElementById('lines');lines.innerHTML=CART.map(line).join('')||'<div class="muted mt-2">Belum ada item.</div>';document.getElementById('total').textContent=fmt(cartTotal());lines.querySelectorAll('[data-inc]').forEach(b=>b.addEventListener('click',e=>{const i=+e.currentTarget.dataset.inc;CART[i].qty++;save();renderCart();}));lines.querySelectorAll('[data-dec]').forEach(b=>b.addEventListener('click',e=>{const i=+e.currentTarget.dataset.dec;CART[i].qty=Math.max(1,CART[i].qty-1);save();renderCart();}));lines.querySelectorAll('[data-del]').forEach(b=>b.addEventListener('click',e=>{const i=+e.currentTarget.dataset.del;CART.splice(i,1);save();renderCart();}));const body=encodeURIComponent(summaryText());document.getElementById('mailto').href=`mailto:narenskii@gmail.com?subject=Pesanan NJ Cafe&body=${{body}}`;document.getElementById('wa').href=`https://wa.me/?text=${{body}}`;}
function summaryText(){if(!CART.length)return'Keranjang kosong.';const lines=CART.map((l,i)=>`${{i+1}}. ${{l.name}} x${{l.qty}} @ ${{fmt(l.price)}} = ${{fmt(l.price*l.qty)}}${{l.note?' | Catatan: '+l.note:''}}`).join('\n');return `Pesanan NJ Cafe\nTanggal: ${{new Date().toLocaleString('id-ID')}}\n\n${{lines}}\n\nTotal: ${{fmt(cartTotal())}}\n\nTerima kasih.`;}

let MOD={{}};
function openModal(id){{MOD.item=MENU.find(m=>m.id===id);document.getElementById('mName').textContent=MOD.item.name;document.getElementById('mPrice').textContent=fmt(MOD.item.price);document.getElementById('mNote').value='';document.getElementById('mQty').value=1;document.getElementById('modal').classList.remove('hidden');document.getElementById('modal').classList.add('flex');}}
function closeModal(){{document.getElementById('modal').classList.add('hidden');document.getElementById('modal').classList.remove('flex');}}
document.getElementById('mClose').addEventListener('click',closeModal);
document.getElementById('mMinus').addEventListener('click',()=>{{const el=document.getElementById('mQty');el.value=Math.max(1,(+el.value||1)-1);}});
document.getElementById('mPlus').addEventListener('click',()=>{{const el=document.getElementById('mQty');el.value=(+el.value||1)+1;}});
document.getElementById('mAdd').addEventListener('click',()=>{{const qty=Math.max(1,+document.getElementById('mQty').value||1);const note=document.getElementById('mNote').value.trim();const exist=CART.find(l=>l.id===MOD.item.id && l.note===note);if(exist)exist.qty+=qty;else CART.push({{id:MOD.item.id,name:MOD.item.name,price:MOD.item.price,qty,note}});save();renderCart();closeModal();}});

const wrap=document.getElementById('cartWrap'),panel=document.getElementById('cartPanel'),bd=document.getElementById('cartBackdrop');
function openCart(){{wrap.classList.remove('hidden');requestAnimationFrame(()=>{{panel.classList.remove('translate-x-full');bd.classList.remove('opacity-0');bd.classList.add('opacity-100');}});}}
function closeCart(){{panel.classList.add('translate-x-full');bd.classList.add('opacity-0');bd.classList.remove('opacity-100');setTimeout(()=>wrap.classList.add('hidden'),280);}}
document.getElementById('openCart').addEventListener('click',openCart);
document.getElementById('cartClose').addEventListener('click',closeCart);
bd.addEventListener('click',closeCart);

document.getElementById('btnClear').addEventListener('click',()=>{{CART=[];save();renderCart();}});
document.getElementById('btnCopy').addEventListener('click',async()=>{{await navigator.clipboard.writeText(summaryText());alert('Rincian pesanan disalin.');}});

document.getElementById('q').addEventListener('input',renderList);
document.getElementById('cat').addEventListener('change',renderList);
document.getElementById('sort').addEventListener('change',renderList);

renderCats();renderList();renderCart();
</script>

<footer class="border-t border-black/10 mt-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 py-10 grid md:grid-cols-3 gap-8 text-sm">
    <div>
      <div class="font-extrabold text-lg">NJ Cafe</div>
      <p class="mt-2 muted">Jl. Siliwangi No.62, Pancoran Mas, Depok</p>
      <p class="muted">© <span id="y"></span> NJ Cafe — All rights reserved.</p>
    </div>
    <div>
      <div class="font-bold">Navigasi</div>
      <ul class="mt-2 space-y-1">
        <li><a href="order.html" class="hover:underline">Order</a></li>
        <li><a href="outlets.html" class="hover:underline">Outlets</a></li>
        <li><a href="academy.html" class="hover:underline">Academy</a></li>
        <li><a href="news.html" class="hover:underline">News</a></li>
        <li><a href="faq.html" class="hover:underline">FAQ</a></li>
      </ul>
    </div>
    <div>
      <div class="font-bold">Ikuti Kami</div>
      <ul class="mt-2 space-y-1">
        <li><a class="hover:underline" href="#">Instagram</a></li>
        <li><a class="hover:underline" href="#">YouTube</a></li>
        <li><a class="hover:underline" href="#">TikTok</a></li>
      </ul>
    </div>
  </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('y').textContent = new Date().getFullYear();

  const drawer = document.getElementById('drawer');
  const panel = document.getElementById('panel');
  const openBtn = document.getElementById('openMenu');
  const closeBtn = document.getElementById('closeMenu');
  const backdrop = document.getElementById('backdrop');

  function openDrawer(){
    drawer.classList.remove('hidden');
    requestAnimationFrame(()=>{
      panel.classList.remove('translate-x-full');
      backdrop.classList.remove('opacity-0');
      backdrop.classList.add('opacity-100');
    });
  }
  function closeDrawer(){
    panel.classList.add('translate-x-full');
    backdrop.classList.add('opacity-0');
    backdrop.classList.remove('opacity-100');
    setTimeout(()=>drawer.classList.add('hidden'), 280);
  }
  openBtn && openBtn.addEventListener('click', openDrawer);
  closeBtn && closeBtn.addEventListener('click', closeDrawer);
  backdrop && backdrop.addEventListener('click', closeDrawer);
});
</script>
</body>
</html>
